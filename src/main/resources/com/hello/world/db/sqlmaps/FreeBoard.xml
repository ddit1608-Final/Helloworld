<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"  "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="FreeBoard">
	<typeAlias alias="str" type="java.lang.String" />
	<typeAlias alias="int" type="java.lang.Integer" />	
	<typeAlias alias="freeboard" type="com.hello.world.dto.FreeBoardVO"/>
	<typeAlias alias="mem" type="com.hello.world.dto.MemVO"/>
	<typeAlias alias="freecomm" type="com.hello.world.dto.FreeBoardCommVO"/>
	
	
	<select id="listFreeBoard" parameterClass="str" resultClass="freeboard">
		select * from freeboard where mem_mail =#mem_mail#
	</select>
	
	<select id="getFreeBoard" parameterClass="str" resultClass="freeboard">
		select * from freeBoard where freeboard_posting_no=#freeboard_posting_no#
	</select>
	
	<insert id="insertFreeBoard" parameterClass="freeboard">
		insert into freeboard(freeboard_posting_no,mem_mail,freeboard_title,freeboard_cont,freeboard_pwd)
			values(freeboard_posting_no.nextval,#mem_mail#,#freeboard_title#,#freeboard_cont#,#freeboard_pwd#)
	</insert>
	
	<update id="updateFreeBoard" parameterClass="freeboard">
		UPDATE freeBoard
		SET
			FREEBOARD_CONT = #freeboard_cont#
		WHERE FREEBOARD_POSTING_NO=#freeboard_posting_no#
	</update>
	
	<select id="listAllFreeBoard" parameterClass="str" resultClass="freeboard" >
		<!-- select * from freeboard order by freeboard_posting_no desc -->
		select * from memfree where freeboard_title like '%'||#freeboard_title#||'%' order by freeboard_posting_no desc
	</select>

	<select id="freeDetail" parameterClass="str" resultClass="freeboard">
		select * from memfree where freeboard_posting_no=#freeboard_posting_no# 
	</select>
	
	<delete id="deleteFreeBoard" parameterClass="str">
		delete
		from freeboard
		where freeboard_posting_no=#freeboard_posting_no#
	</delete>
	
	<select id="totalFreeBoard" parameterClass="str" resultClass="int">
		select count(*) from freeBoard where freeboard_title like '%'||#freeboard_title#||'%'
	</select>
	
	<!-- 
	댓글에 관한 view를 이용한 쿼리 
	<select id="freeDetail" parameterClass="str" resultClass="freecomm">
		select * from mfcomm where freeboard_posting_no=#freeboard_posting_no# 
	</select>
	 -->
	<!-- 댓글 -->
	<!-- <insert id="insertFreeComm" parameterClass="freecomm">
		INSERT INTO FREEBOARD_COMM(FREEBOARD_ANS_CODE,FREEBOARD_COMM_CONT,FREEBOARD_COMM_WRI) 
    		VALUES(freeboard_ans_code.nextval,#freeboard_comm_cont#,#freeboard_comm_wri#);
	</insert>
	<update id="updateFreeComm" parameterClass="freecomm">
		UPDATE freeBoard_comm
		SET
			FREEBOARD_COMM_CONT = #freeboard_comm_cont#
		WHERE freeboard_ans_code= #freeboard_ans_code#
	</update>
	<delete id="deleteFreeComm" parameterClass="str">
		delete
		from freeboard_comm
		where freeboard_ans_code=#freeboard_ans_code#
	</delete> -->
	
	
</sqlMap>